# Инструкция по развертыванию проекта "Showcase"

Это руководство поможет вам настроить и запустить проект локально, а также развернуть его на платформе Render.

### **1. Необходимые компоненты**

Убедитесь, что на вашем компьютере установлены:
*   **Python** (версия 3.8 или выше)
*   **Node.js** и **npm** (версия 18 или выше)
*   **PostgreSQL** (если вы хотите запустить базу данных локально)

---
### **2. Локальный запуск**

#### **Настройка бэкенда:**

1.  **Создайте и активируйте виртуальное окружение Python:**
    ```bash
    python -m venv venv
    source venv/bin/activate  # Для Windows: venv\Scripts\activate
    ```

2.  **Установите зависимости Python:**
    ```bash
    pip install -r backend/requirements.txt
    ```

3.  **Настройте переменные окружения:**
    Создайте файл `.env` в корневой папке проекта и добавьте в него следующие переменные:
    ```
    DATABASE_URL="postgresql://user:password@localhost/showcase_db"
    TELEGRAM_BOT_TOKEN="ВАШ_ТЕЛЕГРАМ_БОТ_ТОКЕН"
    ```
    - Замените `user:password@localhost/showcase_db` на ваши данные для подключения к локальной базе данных PostgreSQL.
    - Замените `ВАШ_ТЕЛЕГРАМ_БОТ_ТОКЕН` на токен вашего Telegram бота.

#### **Сборка фронтенда:**

1.  **Перейдите в папку с фронтендом и установите зависимости:**
    ```bash
    cd frontend-react
    npm install
    ```

2.  **Соберите статические файлы для продакшена:**
    ```bash
    npm run build
    ```
    Эта команда создаст папку `static` внутри `backend`, которая будет использоваться FastAPI для отдачи фронтенда.

#### **Запуск сервера:**

1.  **Вернитесь в корневую папку проекта:**
    ```bash
    cd ..
    ```

2.  **Запустите бэкенд-сервер:**
    ```bash
    uvicorn backend.main:app --reload
    ```
    Теперь ваше приложение должно быть доступно по адресу `http://localhost:8000`.

---
### **3. Развертывание (деплой) на Render**

Вы можете использовать бесплатные тарифы Render для базы данных и веб-сервиса.

#### **Шаг 1: Создание базы данных PostgreSQL**

1.  В панели управления Render перейдите в **New -> PostgreSQL**.
2.  Придумайте имя для базы данных и выберите бесплатный тариф (`Free`).
3.  После создания базы данных скопируйте ее **Internal Connection URL**. Он понадобится для бэкенда.

#### **Шаг 2: Настройка и развертывание веб-сервиса**

1.  В панели управления Render перейдите в **New -> Web Service**.
2.  Подключите ваш репозиторий GitHub/GitLab.
3.  Настройте сервис следующим образом:
    *   **Name:** `showcase-backend` (или любое другое имя).
    *   **Root Directory:** Оставьте пустым (корень репозитория).
    *   **Environment:** `Python 3`.
    *   **Build Command:** Эта команда соберет и фронтенд, и бэкенд.
        ```bash
        cd frontend-react && npm install && npm run build && cd .. && pip install -r backend/requirements.txt
        ```
    *   **Start Command:**
        ```bash
        uvicorn backend.main:app --host 0.0.0.0 --port $PORT
        ```
4.  Перейдите в раздел **Environment** и добавьте **все** следующие переменные окружения:
    *   **Key:** `DATABASE_URL`, **Value:** Вставьте **Internal Connection URL** вашей базы данных.
    *   **Key:** `BOT_TOKEN`, **Value:** Вставьте токен вашего Telegram бота.
    *   **Key:** `TONCENTER_API_KEY`, **Value:** Вставьте ваш API-ключ для TONcenter.
    *   **Примечание:** Переменная `RENDER_EXTERNAL_URL` (необходимая для функции "Keep-Alive") будет добавлена Render автоматически. Вам не нужно ее настраивать.
5.  Нажмите **Create Web Service**. Render автоматически начнет сборку и развертывание вашего приложения. После завершения ваше приложение будет доступно по предоставленному URL.